name: Publish NuGet package
description: Publish a NuGet package on a NuGet server

inputs:
  artifact-name:
    type: string
    required: true
  artifact-path:
    type: string
    required: true
  source:
    type: string
    required: true
  api-key:
    type: string
    required: true

runs:
  using: composite
  steps:
    - name: Download packages
      uses: actions/download-artifact@v4
      with:
        name: ${{ inputs.artifact-name }}
        path: ${{ inputs.artifact-path }}

    - name: Publish to NuGet
      shell: pwsh
      run: >
        dotnet nuget push
        (Join-Path "${{ inputs.artifact-path }}" "*.nupkg")
        --skip-duplicate --force-english-output
        --source ${{ inputs.source }}
        --api-key ${{ inputs.api-key }}
        --timeout 300